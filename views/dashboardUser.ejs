<%- include("templates/header.ejs") %>
<body class="dashboard-page">
  <div class="sidebar" id="sidebar">
    <div class="brand">
      <h2>Gestor de inventarios</h2>
    </div>
    <nav>
      <ul>
        <li style="color: var(--muted); font-size: 0.9rem; margin-bottom: 8px; padding: 0 16px;">Navegación principal</li>
        <li><a href="#overview">Dashboard</a></li>
        <li><a href="#clientes">Clientes</a></li>
        <li><a href="#productos">Gestión de productos</a></li>
        <!-- <li><a href="#usuarios">Gestión de usuarios</a></li>
        <li><a href="#reportes">Reportes</a></li> -->
        
        <li style="color: var(--muted); font-size: 0.9rem; margin: 24px 0 8px; padding: 0 16px;">Configuración</li>
        <li><a href="/qr">¡Escanéame!</a></li>
        <li><a href="/salir" id="logoutBtn">Salir</a></li>
      </ul>
    </nav>
  </div>

  <div class="main-content" id="mainContent">
    <header class="topbar">
      <h1>Usuario</h1>
    </header>

    <section id="overview" class="section">
      <div class="cards">
        <div class="card stat">
          <h3>Clientes</h3>
          <p id=""><%= nCli %></p>
        </div>
        <div class="card stat">
          <h3>Existencia total</h3>
          <p id="statStockVal">
            <%= exTot %>
          </p>
        </div>
        <div class="card stat">
          <h3>Proveedores</h3>
          <p>
            <%= nProv %>
          </p>
        </div>
      </div>

      <div class="cards">
        <div class="card stat">
          <h3>Productos</h3>
          <p id="statProductsVal">
            <%= nPro %>
          </p>
        </div>
      </div>
    </section>

    <section id="clientes" class="section">
      <h2>Clientes</h2>
      <div class="card">
        <table class="table">
          <thead>
            <tr><th>Nombre</th><th>Correo</th><th>Teléfono</th></tr>
          </thead>
          <tbody id="clientsTableBody">
            <% 
              clientes.forEach((cliente)=>{
            %>
              <tr>
                <td>
                  <%= cliente.nombre %>
                </td>
                <td>
                  <%= cliente.correo %>
                </td>
                <td>
                  <%= cliente.telefono %>
                </td>
              </tr>
            <%
              })
            %>
          </tbody>
        </table>
      </div>
    </section>

    <section id="productos" class="section">
      <h2>Gestión de productos</h2>
      <div class="card">
        <table class="table">
          <thead>
            <tr><th>Id</th><th>Foto</th><th>Producto</th><th>Categoría</th><th>Existencia</th><th>Proveedor</th></tr>
          </thead>
          <tbody id="productsTableBody">
            <% 
              productos.forEach((product)=>{
            %>
              <tr>
                <td>
                  <%= product._id %>
                </td>
                <td>
                  <img src="images/<%= product.imagen %>" alt="<%= product.producto %>" width="50px">
                </td>
                <td>
                  <%= product.producto %>
                </td>
                <td>
                  <%= product.categoria %>
                </td>
                <td>
                  <%= product.existencia %>
                </td>
                <td>
                  <%= product.proveedor %>
                </td>
              </tr>
            <%
              })
            %>
          </tbody>
        </table>
      </div>
    </section>
    <footer class="small muted">Sistema de Control de Inventarios v1.0</footer>
  </div>
<%- include("templates/footer.ejs") %>